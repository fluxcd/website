<!-- Algolia changes: https://github.com/fluxcd/website/pull/936 -->
{{ if isset .Site.Params "algolia_docsearch" }}
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>

<!-- Calendar changes: https://github.com/fluxcd/website/pull/487 -->
{{ $calendar := resources.Get "js/calendar.js" | js.Build "calendar.js" }}
<script type="text/javascript" src="{{ $calendar.RelPermalink }}" defer></script>

<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>
<script type="text/javascript">

docsearch({
        container: '#docsearch',
        apiKey: 'd466984187cbf406354da362d45b8e3f',
        appId: 'Z41T3FAXIU',
        indexName: 'fluxcd',
        {{ if in .Permalink "/legacy" }}
        searchParameters: { 'facetFilters': ['tags:legacy'], },
        {{ else }}
        searchParameters: { 'facetFilters': ['tags:current'], },
        {{ end }}
});

</script>
{{ end }}
